webpackJsonp([68],{YBc6:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("fZjL"),c=a.n(l),s=a("mvHQ"),i=a.n(s),n=a("Dd8w"),o=a.n(n),r=a("Cz8s"),h=a("+Ap0"),d=a("CjlA"),u=a("aV0S"),p=a("NYxO"),b=a("xEPt"),k=a("t5DY"),f={data:function(){return{distNameOptions:JSON.parse(localStorage.getItem("distList")),isCollapse:this.$store.state.ui.navIsOpen,loadingData:!0,exportLoading:!1,dateSelected:[],pageInfo:null,tableData:[],page:1,pageSize:20,querys:{},schTypeOptions:[{value:"幼儿园",label:"幼儿园"},{value:"托儿所",label:"托儿所"},{value:"小学",label:"小学"}],schPropOptions:[{value:"公办",label:"公办"},{value:"民办",label:"民办"},{value:"其他",label:"其他"}],isSetsemOptions:[{value:0,label:"未设置"},{value:1,label:"已设置"}],dinnerModOptions:[{value:0,label:"自营"},{value:1,label:"外包-快餐配送"},{value:2,label:"外包-现场加工"}],tableSelect:[],showSelect:!1,selectInit:[]}},watch:{"$store.state.ui.navIsOpen":function(e,t){this.isCollapse=e}},created:function(){this.selectBase(),this.userInterface(),this.getTableData()},methods:o()({},Object(p.b)(["exportTableData"]),{userInterface:function(){var e=this;k.a.getUserInterfaceList({interfaceName:"bdRmcList"}).then(function(t){if(t.userColums){e.tableSelect=JSON.parse(t.userColums.columns);var a=[];e.tableSelect.map(function(e){a.push(e.key)}),e.selectInit.map(function(e){e.checked=!1;var t=function(t){a.map(function(a){e[t]===a&&(e.checked=!0)})};for(var l in e)t(l)}),e.$refs.selectMenu.selectArray=e.selectInit}}).catch(function(e){console.log(e)})},selectBase:function(){this.tableSelect=[{label:"企业名称",key:"compName",width:250,checked:!0},{label:"所在地",key:"location",width:100,checked:!0},{label:"详细地址",key:"detailAddr",width:260,checked:!0},{label:"电子邮箱",key:"email",width:160,checked:!0},{label:"联系人",key:"contact",checked:!0},{label:"手机号",key:"mobilePhone",width:120,checked:!0},{label:"质量负责人",key:"qaLeader",width:100,checked:!0},{label:"联系电话",key:"contactNo",width:120,checked:!0},{label:"关联项目点",key:"relPpNum",width:100,checked:!0},{label:"食品经营许可证",key:"licName",width:180,checked:!0},{label:"食品经营许可证图片",key:"licPic",width:100,checked:!0},{label:"食品经营许可证经营单位",key:"licOptUnit",width:200,checked:!0},{label:"食品经营许可证号",key:"licNo",width:200,checked:!0},{label:"食品经营许可证发证日期",key:"ucssIssueDate",width:110,checked:!0},{label:"食品经营许可证有效日期",key:"licValidDate",width:110,checked:!0},{label:"统一社会信用代码",key:"uscc",width:150,checked:!0},{label:"营业执照图片",key:"usccPic",checked:!0},{label:"营业执照经营单位",key:"usccOptUnit",width:200,checked:!0},{label:"营业执照经营范围",key:"optScope",checked:!0},{label:"营业执照注册地址",key:"regAddr",checked:!0},{label:"营业执照详细地址",key:"udetailAddr",checked:!0},{label:"注册资本",key:"regCapital",width:100,checked:!0},{label:"法人代表",key:"corpRepName",width:120,checked:!0},{label:"发证机关",key:"ucssIssueAuth",width:150,checked:!0},{label:"营业执照发证日期",key:"ucssIssueDate",width:100,checked:!0},{label:"营业执照有效日期",key:"ucssValidDate",width:100,checked:!0},{label:"食品卫生许可证",key:"fhlName",width:150,checked:!0},{label:"食品证照图片",key:"fhlPic",checked:!0},{label:"食品卫生许可证经营单位",key:"fhlOptUnit",width:110,checked:!0},{label:"食品卫生许可证号",key:"fhlNo",checked:!0},{label:"食品卫生许可证发证日期",key:"fhlIssueDate",width:110,checked:!0},{label:"食品卫生许可证有效日期",key:"fhlValidDate",width:110,checked:!0},{label:"运输许可证",key:"tplName",width:100,checked:!0},{label:"运输许可证图片",key:"tplPic",width:100,checked:!0},{label:"运输许可证经营单位",key:"tplOptUnit",width:100,checked:!0},{label:"运输许可证许可证号",key:"tplNo",width:100,checked:!0},{label:"运输许可证发证日期",key:"tplIssueDate",width:100,checked:!0},{label:"运输许可证有效日期",key:"tplValidDate",width:100,checked:!0},{label:"IOS认证证书",key:"iosName",width:100,checked:!0},{label:"IOS证照图片",key:"iosPic",width:100,checked:!0},{label:"IOS经营单位",key:"iosOptUnit",width:100,checked:!0},{label:"IOS许可证号",key:"iosNo",width:100,checked:!0},{label:"IOS发证日期",key:"iosIssueDate",width:100,checked:!0},{label:"IOS有效日期",key:"iosValidDate",width:100,checked:!0}],this.selectInit=JSON.parse(i()(this.tableSelect))},showMenu:function(){this.showSelect?this.showSelect=!1:this.showSelect=!0},hideMenu:function(){this.showSelect=!1},selectData:function(e){var t=this,a={interfaceName:"bdRmcList",columns:i()(e)};k.a.addUserInterface(a).then(function(a){t.tableSelect=e,t.hideMenu()}).catch(function(e){console.log(e)})},setParams:function(){var e=this,t={page:this.page,pageSize:this.pageSize};return c()(this.querys).forEach(function(a){e.querys[a]&&(t[a]=e.querys[a])}),t},search:function(){this.page=1,this.getTableData()},getTableData:function(){var e=this;this.loadingData=!0;var t=this.setParams();b.a.getCompanyList(t).then(function(t){e.tableData=t.bdRmcList,e.pageInfo=t.pageInfo,e.loadingData=!1}).catch(function(e){console.log(e)})},handleSizeChange:function(e){this.pageSize=e,this.getTableData()},handleCurrentChange:function(e){this.page=e,this.getTableData()},exportData:function(){var e=this;this.exportLoading=!0;var t={url:"/biOptAnl/v1/expBdRmcList",querys:this.setParams()};this.exportTableData(t).then(function(t){e.exportLoading=!1,e.$utils.downLoad(t.expBdRmcList.expFileUrl)}).catch(function(e){console.log(e)})}}),components:{Header:r.a,Breadcrumb:h.a,searchBox:d.a,SelectMenu:u.a}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"container"}},[a("Header"),e._v(" "),a("div",{staticClass:"main",class:{fullsize:1==e.isCollapse}},[a("Breadcrumb"),e._v(" "),a("div",{staticClass:"wrapperContent"},[a("searchBox",{attrs:{less:["goBack"],model:e.querys},on:{search:e.search,exportData:e.exportData,showMenu:e.showMenu,hideMenu:e.hideMenu}},[[a("el-form",{staticClass:"search-form-inline",attrs:{inline:!0}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"企业名称",clearable:""},model:{value:e.querys.compName,callback:function(t){e.$set(e.querys,"compName",t)},expression:"querys.compName"}})],1),e._v(" "),a("el-form-item",{staticClass:"selectMinni"},[a("el-select",{attrs:{placeholder:"所在地",clearable:"",filterable:""},model:{value:e.querys.distName,callback:function(t){e.$set(e.querys,"distName",t)},expression:"querys.distName"}},e._l(e.$store.state.home.distNameOptions,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),a("el-form-item",[a("el-input",{attrs:{placeholder:"联系人",clearable:""},model:{value:e.querys.contact,callback:function(t){e.$set(e.querys,"contact",t)},expression:"querys.contact"}})],1),e._v(" "),a("el-form-item",[a("el-input",{attrs:{placeholder:"食品经营许可证",clearable:""},model:{value:e.querys.fblNo,callback:function(t){e.$set(e.querys,"fblNo",t)},expression:"querys.fblNo"}})],1),e._v(" "),a("el-form-item",[a("el-input",{attrs:{placeholder:"统一社会信用代码",clearable:""},model:{value:e.querys.blNo,callback:function(t){e.$set(e.querys,"blNo",t)},expression:"querys.blNo"}})],1),e._v(" "),a("el-form-item",[a("el-input",{attrs:{placeholder:"注册资本",clearable:""},model:{value:e.querys.regCapital,callback:function(t){e.$set(e.querys,"regCapital",t)},expression:"querys.regCapital"}})],1)],1)]],2),e._v(" "),a("select-menu",{directives:[{name:"show",rawName:"v-show",value:e.showSelect,expression:"showSelect"}],ref:"selectMenu",attrs:{generateData:e.selectInit},on:{selectData:e.selectData,onCancel:e.hideMenu}}),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingData,expression:"loadingData"}],attrs:{height:"calc(100% - 160px)",data:e.tableData,"element-loading-text":"加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 1)",stripe:""}},e._l(e.tableSelect,function(t,l){return a("el-table-column",{key:l,attrs:{"min-width":t.width,align:"center",label:t.label},scopedSlots:e._u([{key:"default",fn:function(l){return["所在地"!==t.label&&"食品经营许可证图片"!==t.label&&"营业执照图片"!==t.label&&"食品证照图片"!==t.label&&"运输许可证图片"!==t.label&&"IOS证照图片"!==t.label?a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[e._v(e._s(l.row[t.key]))]),e._v(" "),a("div",{attrs:{slot:"reference"},slot:"reference"},[a("span",[e._v(e._s(l.row[t.key]))])])]):e._e(),e._v(" "),"所在地"===t.label?a("span",[e._v("\n              "+e._s(e.distNameOptions.filter(function(e){return e.code===l.row.location})[0]?e.distNameOptions.filter(function(e){return e.code===l.row.location})[0].name:"-")+"\n            ")]):e._e(),e._v(" "),"食品经营许可证图片"===t.label?a("span",["-"==l.row.licPic?a("span",[e._v("-")]):a("a",{attrs:{target:"_blank",href:l.row.licPic,type:"text",size:"small"}},[e._v("查看")])]):e._e(),e._v(" "),"营业执照图片"===t.label?a("span",["-"==l.row.usccPic?a("span",[e._v("-")]):a("a",{attrs:{target:"_blank",href:l.row.usccPic,type:"text",size:"small"}},[e._v("查看")])]):e._e(),e._v(" "),"食品证照图片"===t.label?a("span",["-"==l.row.fhlPic?a("span",[e._v("-")]):a("a",{attrs:{target:"_blank",href:l.row.fhlPic,type:"text",size:"small"}},[e._v("查看")])]):e._e(),e._v(" "),"运输许可证图片"===t.label?a("span",["-"==l.row.tplPic?a("span",[e._v("-")]):a("a",{attrs:{target:"_blank",href:l.row.tplPic,type:"text",size:"small"}},[e._v("查看")])]):e._e(),e._v(" "),"IOS证照图片"===t.label?a("span",["-"==l.row.iosPic?a("span",[e._v("-")]):a("a",{attrs:{target:"_blank",href:l.row.iosPic,type:"text",size:"small"}},[e._v("查看")])]):e._e()]}}])})})),e._v(" "),a("el-pagination",{attrs:{"current-page":e.pageInfo&&e.pageInfo.curPageNum,"page-sizes":[20,30,50,100],"page-size":20,layout:"total, sizes, prev, pager, next, jumper",total:e.pageInfo&&e.pageInfo.pageTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)},staticRenderFns:[]},y=a("VU/8")(f,m,!1,null,null,null);t.default=y.exports}});