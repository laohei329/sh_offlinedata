webpackJsonp([8],{"/Qsj":function(e,r){},f4OD:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=t("woOf"),o=t.n(a),l=t("Dd8w"),n=t.n(l),i=t("Cz8s"),s=t("+Ap0"),c=t("eOoE"),f=function(e){return c.a.get("/biOptAnl/v1/mailSrvDet",{params:e})},m=function(e){return c.a.post("/biOptAnl/v1/saveMailSrvInfo",e)},u=function(e){return c.a.post("/biOptAnl/v1/sendTestMail",e)},d=t("NYxO"),v={data:function(){var e=this,r=function(r,t,a){e.$utils.customValidate(r.field,/(?:pop3|POP3|pop|POP|smtp|SMTP)\.[\w-]+\.(?:com|cn|net|org|gov|COM|CN|NET|ORG|GOV)(?:\.(?:cn|jp))?/,t,a,"请输入正确的服务器地址!","formInfo",e)},t=function(r,t,a){e.$utils.customValidate(r.field,/^([0-9]|[1-9]\d|[1-9]\d{2}|[1-9]\d{3}|[1-5]\d{4}|6[0-4]\d{3}|65[0-4]\d{2}|655[0-2]\d|6553[0-5])$/,t,a,"请输入正确的端口号!","formInfo",e)};return{isCollapse:this.$store.state.ui.navIsOpen,mailSrvPortCodes:[],formInfo:{rcvMailPort:"0",sendMailPort:"0"},rules:{mailUserName:[{required:!0,message:"请输入电子邮箱",trigger:["blur","change"]},{validator:function(r,t,a){e.$utils.customValidate("mailUserName",/^([0-9A-Za-z\-_\.]+)@([0-9a-z]+\.[a-z]{2,3}(\.[a-z]{2})?)$/g,t,a,"请输入正确邮箱地址!","formInfo",e)},trigger:["blur","change"]}],password:[{required:!0,message:"请输入邮件密码",trigger:["blur","change"]},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:["blur","change"]}],rcvMailServer:[{required:!0,message:"请输入收件服务器",trigger:["blur","change"]},{validator:r,trigger:["blur","change"]}],rcvMailPortNo:[{required:!0,message:"请输入端口号",trigger:["blur","change"]},{validator:t,trigger:["blur","change"]}],sendMailServer:[{required:!0,message:"请输入发件服务器",trigger:["blur","change"]},{validator:r,trigger:["blur","change"]}],sendMailPortNo:[{required:!0,message:"请输入端口号",trigger:["blur","change"]},{validator:t,trigger:["blur","change"]}]},edit:!1,submitEnable:!0}},watch:{"$store.state.ui.navIsOpen":function(e,r){this.isCollapse=e}},created:function(){this.init(),this.getSelectData()},methods:n()({},Object(d.b)(["getOptions"]),{init:function(){var e=this;f().then(function(r){var t=r.mailSrvDet;t.rcvMailPort=t.rcvMailPort.toString(),t.sendMailPort=t.sendMailPort.toString(),e.formInfo=t}).catch(function(e){console.log(e)})},getSelectData:function(){var e=this;["mailSrvPortCodes"].forEach(function(r){var t={url:"/biOptAnl/v1/"+r,querys:{}};e.getOptions(t).then(function(t){e[r]=t[r]}).catch(function(e){console.log(e)})})},testEmail:function(){var e=this,r=o()({},this.formInfo);r.rcvMailPort=Number(r.rcvMailPort),r.sendMailPort=Number(r.sendMailPort),u(r).then(function(r){1e3==r.result.code?e.$message({message:"测试邮件发送成功！",type:"success"}):e.$message({message:"测试邮件发送失败！",type:"error"})}).catch(function(e){console.log(e)})},onSubmit:function(){var e=this;this.$refs.settingInfo.validate(function(r){if(!r)return console.log("error"),!1;var t=o()({},e.formInfo);t.rcvMailPort=Number(t.rcvMailPort),t.sendMailPort=Number(t.sendMailPort),m(t).then(function(r){r.saveMailSrvInfo&&(e.submitEnable=!0)&&e.$message({message:"邮件服务器设置成功！",type:"success"})}).catch(function(e){console.log(e)})})}}),components:{Header:i.a,Breadcrumb:s.a}},p={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{attrs:{id:"container"}},[t("Header"),e._v(" "),t("div",{staticClass:"main",class:{fullsize:1==e.isCollapse}},[t("Breadcrumb"),e._v(" "),t("div",{staticClass:"wrapperContent"},[t("el-form",{ref:"settingInfo",staticClass:"back-white create",attrs:{model:e.formInfo,rules:e.rules,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"电子邮箱：",prop:"mailUserName"}},[t("el-input",{attrs:{placeholder:"请输入电子邮箱"},model:{value:e.formInfo.mailUserName,callback:function(r){e.$set(e.formInfo,"mailUserName",r)},expression:"formInfo.mailUserName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"密码：",prop:"password"}},[t("el-input",{attrs:{placeholder:"请输入邮件密码",type:"password"},model:{value:e.formInfo.password,callback:function(r){e.$set(e.formInfo,"password",r)},expression:"formInfo.password"}})],1),e._v(" "),t("span",{staticClass:"form-inline",attrs:{inline:!0}},[t("el-form-item",{attrs:{label:"收件服务器：",prop:"rcvMailServer"}},[t("el-input",{attrs:{placeholder:"请输入收件服务器"},model:{value:e.formInfo.rcvMailServer,callback:function(r){e.$set(e.formInfo,"rcvMailServer",r)},expression:"formInfo.rcvMailServer"}})],1),e._v(" "),t("el-form-item",{staticClass:"mini",attrs:{label:"端口：",prop:"rcvMailPort"}},[t("el-select",{attrs:{clearable:"",filterable:"",placeholder:"端口"},model:{value:e.formInfo.rcvMailPort,callback:function(r){e.$set(e.formInfo,"rcvMailPort",r)},expression:"formInfo.rcvMailPort"}},e._l(e.mailSrvPortCodes,function(e){return t("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),t("el-form-item",{staticClass:"mini",attrs:{label:"端口号：",prop:"rcvMailPortNo"}},[t("el-input",{attrs:{placeholder:"请输入端口号"},model:{value:e.formInfo.rcvMailPortNo,callback:function(r){e.$set(e.formInfo,"rcvMailPortNo",r)},expression:"formInfo.rcvMailPortNo"}})],1)],1),e._v(" "),t("span",{staticClass:"form-inline",attrs:{inline:!0}},[t("el-form-item",{attrs:{label:"发件服务器：",prop:"sendMailServer"}},[t("el-input",{attrs:{placeholder:"请输入发件服务器"},model:{value:e.formInfo.sendMailServer,callback:function(r){e.$set(e.formInfo,"sendMailServer",r)},expression:"formInfo.sendMailServer"}})],1),e._v(" "),t("el-form-item",{staticClass:"mini",attrs:{label:"端口：",prop:"sendMailPort"}},[t("el-select",{attrs:{clearable:"",filterable:"",placeholder:"端口"},model:{value:e.formInfo.sendMailPort,callback:function(r){e.$set(e.formInfo,"sendMailPort",r)},expression:"formInfo.sendMailPort"}},e._l(e.mailSrvPortCodes,function(e){return t("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),t("el-form-item",{staticClass:"mini",attrs:{label:"端口号：",prop:"sendMailPortNo"}},[t("el-input",{attrs:{placeholder:"请输入端口号"},model:{value:e.formInfo.sendMailPortNo,callback:function(r){e.$set(e.formInfo,"sendMailPortNo",r)},expression:"formInfo.sendMailPortNo"}})],1)],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"default"},on:{click:function(r){e.testEmail()}}},[e._v("发送测试邮件")])],1),e._v(" "),t("div",{staticClass:"form-btn-warpper"},[t("el-button",{class:e.submitEnable?"":"disabled",attrs:{type:"primary"},on:{click:function(r){e.submitEnable&&e.onSubmit()}}},[e._v("保存")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var g=t("VU/8")(v,p,!1,function(e){t("g/u+"),t("/Qsj")},"data-v-5f733bd4",null);r.default=g.exports},"g/u+":function(e,r){}});