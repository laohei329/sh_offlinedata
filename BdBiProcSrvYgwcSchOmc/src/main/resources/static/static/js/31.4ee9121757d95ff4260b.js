webpackJsonp([31],{S6yb:function(e,s){},yFrt:function(e,s,o){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r=o("woOf"),a=o.n(r),t=o("Dd8w"),c=o.n(t),n=o("Cz8s"),i=o("+Ap0"),l=o("uXeI"),d=o.n(l),w=o("NYxO"),f={data:function(){var e=this;return{isCollapse:this.$store.state.ui.navIsOpen,checkPwd:!1,checkPwdDone:!1,checkPower:{color:"#ff9e9e",tag:"弱",info:"有被盗风险，建议使用字母、数字和符号的两种以及以上组合"},info:{},rules:{oldPassword:[{required:!0,message:"请输入原密码",trigger:"blur"},{validator:function(s,o,r){e.checkOldPwd(r)},trigger:"blur"}],newPassword:[{required:!0,message:"请输入新密码",trigger:["blur","change"]},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:["blur","change"]},{validator:function(s,o,r){return o===e.info.oldPassword?r(new Error("新密码不可以与原密码相同!")):/(^[0-9]\d+$)|(^[a-z]+$)|(^[A-Z]+$)/.test(o)?(e.checkPower.color="#ff9e9e",e.checkPower.tag="弱",e.checkPower.info="有被盗风险，建议使用字母、数字和符号的两种以及以上组合",r(),!1):/^(?![a-zA-Z]+$)(?![A-Z0-9]+$)(?![A-Z\\W_!@#$%^&*`~()-+=]+$)(?![a-z0-9]+$)(?![a-z\\W_!@#$%^&*`~()-+=]+$)(?![0-9\\W_!@#$%^&*`~()-+=]+$)[a-zA-Z0-9\\W_!@#$%^&*`~()-+=]{6,20}$/.test(o)?(e.checkPower.color="#22c290",e.checkPower.tag="强",e.checkPower.info="你的密码很安全",r(),!1):(e.checkPower.color="#ffb557",e.checkPower.tag="中",e.checkPower.info="安全强度适中，可以使用三种以上的组合来提高安全强度",r(),!1)},trigger:["blur","change"]}],confPassword:[{required:!0,message:"请输入重复新密码",trigger:["blur","change"]},{validator:function(s,o,r){if(o!==e.info.newPassword)return r(new Error("两次密码不一致!"));r()},trigger:["blur","change"]}]}}},watch:{"$store.state.ui.navIsOpen":function(e,s){this.isCollapse=e}},methods:c()({},Object(w.b)(["checkOldPassword","updatePassword"]),{checkOldPwd:function(e){var s=this;this.checkPwd=!0,this.checkOldPassword({inPassword:d()(this.info.oldPassword)}).then(function(o){if(s.checkPwd=!1,s.checkPwdDone=o.result&&1e3===o.result.code,!s.checkPwdDone)return e(new Error("原密码输入不正确!"));e()}).catch(function(e){console.log(e)})},onSubmit:function(){var e=this,s={"弱":0,"中":1,"强":2};this.$refs.info.validate(function(o){if(!o)return!1;var r=a()({},e.info);r.safeGrade=s[e.checkPower.tag],r.oldPassword=d()(r.oldPassword),r.newPassword=d()(r.newPassword),delete r.confPassword,e.updatePassword(r).then(function(s){1e3==s.result.code&&e.$message({message:"密码修改成功！",type:"success"})}).catch(function(e){console.log(e)})})}}),components:{Header:n.a,Breadcrumb:i.a}},u={render:function(){var e=this,s=e.$createElement,o=e._self._c||s;return o("div",{attrs:{id:"container"}},[o("Header"),e._v(" "),o("div",{staticClass:"main",class:{fullsize:1==e.isCollapse}},[o("Breadcrumb"),e._v(" "),o("div",{staticClass:"wrapperContent"},[o("el-form",{ref:"info",staticClass:"back-white create",attrs:{model:e.info,rules:e.rules,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"原密码：",prop:"oldPassword"}},[o("el-input",{staticClass:"spec",attrs:{placeholder:"原密码",type:"password"},model:{value:e.info.oldPassword,callback:function(s){e.$set(e.info,"oldPassword",s)},expression:"info.oldPassword"}}),e._v(" "),o("span",{directives:[{name:"show",rawName:"v-show",value:e.checkPwdDone,expression:"checkPwdDone"}],staticClass:"exist-check",staticStyle:{color:"#22c290","margin-top":"-23px"}},[o("i",{staticClass:"el-icon-success"}),e._v(" "),o("span",[e._v("验证通过")])]),e._v(" "),o("span",{directives:[{name:"loading",rawName:"v-loading",value:e.checkPwd,expression:"checkPwd"}],staticClass:"exist-check",attrs:{"element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 1)"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"新密码：",prop:"newPassword"}},[o("el-input",{attrs:{placeholder:"新密码",type:"password"},model:{value:e.info.newPassword,callback:function(s){e.$set(e.info,"newPassword",s)},expression:"info.newPassword"}}),e._v(" "),o("span",{directives:[{name:"show",rawName:"v-show",value:e.info.newPassword,expression:"info.newPassword"}],staticClass:"pwd-strength-check",style:"color:"+e.checkPower.color},[o("span",{style:"background-color:"+e.checkPower.color},[e._v(e._s(e.checkPower.tag))]),e._v(e._s(e.checkPower.info))]),e._v(" "),o("span",{staticClass:"warn-info"},[o("i",{staticClass:"el-icon-info"}),e._v("6-20个字符，由数字、英文字母（区分大小写）或符号两种以及以上的组合，不允许有空格")])],1),e._v(" "),o("el-form-item",{attrs:{label:"确认密码：",prop:"confPassword"}},[o("el-input",{attrs:{placeholder:"重复新密码",type:"password"},model:{value:e.info.confPassword,callback:function(s){e.$set(e.info,"confPassword",s)},expression:"info.confPassword"}})],1),e._v(" "),o("div",{staticClass:"form-btn-warpper"},[o("el-button",{class:e.checkPwdDone?"":"disabled",attrs:{type:"primary"},on:{click:function(s){e.checkPwdDone&&e.onSubmit()}}},[e._v("确认提交")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var h=o("VU/8")(f,u,!1,function(e){o("S6yb")},"data-v-4ca89130",null);s.default=h.exports}});