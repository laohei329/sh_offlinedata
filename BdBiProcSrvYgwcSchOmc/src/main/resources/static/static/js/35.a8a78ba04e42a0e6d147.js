webpackJsonp([35],{W2Q3:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=o("//Fk"),n=o.n(s);o("iF09");function i(e){return!e.match(/\S/)}var a={name:"login",mixins:[{methods:{validateFormItem:function(e,t,o,s){var n=this;s=s||0,this.$refs[e.name].validateField(e.fields[s],function(i){i?o():s!=e.fields.length-1?(s+=1,n.validateFormItem(e,t,o,s)):t()})}}}],data:function(){return{loginForm:{username:"",password:""},checked:!1,loading:!1,passwordType:"password",ruleArr:["username","password"],loginRules:{username:[{required:!0,trigger:" ",validator:function(e,t,o){return i(t)?o(new Error("用户账号不能为空 ")):t.match(/^[a-zA-Z0-9\-\_\\()]{4,20}$/)?o():o(new Error("请正确输入用户名"))}}],password:[{required:!0,trigger:" ",validator:function(e,t,o){i(t)?o(new Error("请输入密码 ")):o()}}]}}},mounted:function(){this.loginForm.username=this.$cookie.getCookie("username"),this.loginForm.password=this.$cookie.getCookie("password"),this.loginForm.username&&this.loginForm.password&&(this.checked=!0)},methods:{showPassword:function(){"password"===this.passwordType?this.passwordType="":this.passwordType="password"},handleLogin:function(){var e=this;new n.a(function(t,o){e.validateFormItem({name:"loginForm",fields:e.ruleArr},t,o)}).then(function(){var t={username:e.loginForm.username,password:e.loginForm.password};1==e.checked?(e.$cookie.setCookie("username",t.username),e.$cookie.setCookie("password",t.password)):(e.$cookie.delCookie("username"),e.$cookie.delCookie("password"));e.loading=!0,e.$store.dispatch("LoginByUsername",t).then(function(t){e.$store.commit("SET_LOGIN_TEMPORARY",!0)}).then(function(t){localStorage.setItem("username",e.loginForm.username);var o=e.$utils.getWindowOrigin();window.location.href=o+"/"}).catch(function(){e.loading=!1})})}}},r={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"login-container"},[o("div",{staticClass:"login-content"},[o("div",{staticClass:"login-main"},[e._m(0),e._v(" "),o("div",{staticClass:"main"},[o("p",{staticClass:"form-title"},[e._v("上海市学校食品安全监督管理中心")]),e._v(" "),o("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm,rules:e.loginRules}},[o("el-form-item",{staticStyle:{"line-height":"40px"},attrs:{prop:"username"}},[o("el-input",{attrs:{name:"username",type:"text",autoComplete:"off",placeholder:"请输入用户名"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}},[o("i",{staticClass:"iconfont icon-user",attrs:{slot:"prefix"},slot:"prefix"})])],1),e._v(" "),o("el-form-item",{staticStyle:{"margin-bottom":"5px","line-height":"40px"},attrs:{prop:"password"}},[o("span",{staticClass:"svg-container"}),e._v(" "),o("el-input",{attrs:{name:"password",type:e.passwordType,autoComplete:"off",placeholder:"请输入密码"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.handleLogin()}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}},[o("i",{staticClass:"iconfont icon-password",staticStyle:{"font-size":"18px"},attrs:{slot:"prefix"},slot:"prefix"})])],1),e._v(" "),o("el-form-item",{staticStyle:{"padding-left":"5px"}},[o("el-checkbox",{model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("记住密码")]),e._v(" "),o("a",{staticClass:"forget-password"},[e._v("忘记密码?")])],1),e._v(" "),o("el-button",{staticClass:"login-btn",attrs:{loading:e.loading},nativeOn:{click:function(t){t.preventDefault(),e.handleLogin()}}},[e._v("登 录")])],1)],1)]),e._v(" "),e._m(1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"logo-container"},[t("img",{staticClass:"logo",attrs:{src:"/static/images/logo.png",alt:""}})])},function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"login-bottom"},[o("div",{staticClass:"bottom-content"},[o("span",{staticStyle:{"margin-right":"30px"}},[o("span",{staticClass:"iconImg"}),e._v(" "),o("span",[e._v("沪公网安备")]),e._v("31010402002476号\n        ")]),e._v(" "),o("span",[o("span",[e._v("©")]),o("span",[e._v("2018")]),e._v("上海天坊信息科技有限公司 ")]),o("span",{staticStyle:{"margin-left":"30px"}},[e._v("版本v1.4.0")])])])}]};var l=o("VU/8")(a,r,!1,function(e){o("XWkh")},null,null);t.default=l.exports},XWkh:function(e,t){}});