webpackJsonp([13],{KR8f:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("Dd8w"),n=a.n(o),i=a("mvHQ"),s=a.n(i),c=a("Cz8s"),l=a("+Ap0"),r=a("8YC6"),d=a("NYxO"),h=a("xO/y"),m={data:function(){return{isCollapse:this.$store.state.ui.navIsOpen,dateToday:this.$timer.getNowFormatDate(),homeInfo:{},accounces:[],matRateInfo:{},goodsOptRateInfo:{},dishRsRateInfo:{},licWarnProcRateInfo:{},barChart:{},schoolNum:[],arrowObj:{0:"equal",1:"upRate",2:"downRate"},dateMatSelected:this.$timer.getNowFormatDate(),dateGoodsSelected:this.$timer.getNowFormatDate(),dateDishSelected:this.$timer.getNowFormatDate(),dateLicWarnSelected:this.$timer.getNowFormatDate(),pickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()-864e4}}}},directives:{permission:r.a},computed:{},watch:{"$store.state.ui.navIsOpen":function(t,e){this.isCollapse=t}},created:function(){var t=this;this.getBasicInformation().then(function(e){t.homeInfo=e.todoListStat}),this.getAnnounces().then(function(e){t.$store.commit("SET_HOMEBASIC",e.rbBulletins.filter(function(t){return 0==t.readFlag})),t.accounces=e.rbBulletins}),h.a.getSchSitInfo().then(function(e){t.drawSchNumber(e.schSitInfo.supSchNum),t.drawSchCategory(e.schSitInfo.schPropClass)}).catch(function(t){console.log(t)}),this.handleMatRate(),this.handleGoodsOptRate(),this.handleDishRsRate(),this.handleLicWarnProcRate(),this.getCommonSelectData(),this.getAccountDetails({userName:localStorage.getItem("username")}).then(function(t){localStorage.setItem("ACCOUNTDETAILS",s()(t.amAccountDet))}).catch(function(t){console.log(t)})},methods:n()({},Object(d.b)(["getBasicInformation","getAnnounces","getSchoolNum","getCommonSelectData","getMatRate","getGoodsOptRate","getAccountDetails"]),{handleMatRate:function(){var t=this;this.getMatRate({date:this.dateMatSelected.replace(/\//g,"-")}).then(function(e){t.matRateInfo=e,t.drawMatRate()}).catch(function(t){console.log(t)})},handleGoodsOptRate:function(){var t=this;this.getGoodsOptRate({date:this.dateGoodsSelected.replace(/\//g,"-")}).then(function(e){t.goodsOptRateInfo=e,t.drawtGoodsOptRate()}).catch(function(t){console.log(t)})},handleDishRsRate:function(){var t=this;h.a.getDishRsRate({date:this.dateDishSelected.replace(/\//g,"-")}).then(function(e){t.dishRsRateInfo=e,t.drawDishRsRate()}).catch(function(t){console.log(t)})},handleLicWarnProcRate:function(){var t=this;h.a.getLicWarnProcRate({date:this.dateLicWarnSelected.replace(/\//g,"-")}).then(function(e){t.licWarnProcRateInfo=e,t.drawLicWarnProcRate()}).catch(function(t){console.log(t)})},drawMatRate:function(){var t=this.$echarts.init(document.getElementById("matRateChart")),e={tooltip:{trigger:"axis",formatter:function(t){for(var e=t[0].name+"<br/>",a=0,o=t.length;a<o;a++)e+=t[a].marker+t[a].seriesName+"："+t[a].data+"%<br/>";return e}},grid:{left:"2%",right:"2%",bottom:"10%",containLabel:!0},legend:{data:["排菜率","用料确认率"],orient:"vertical",x:"right"},calculable:!0,xAxis:[{type:"category",boundaryGap:!1,axisTick:{show:!1},axisLine:{lineStyle:{color:"#cccccc"}},axisLabel:{margin:15,textStyle:{color:"#666666",fontSize:13,fontWeight:300}},data:this.matRateInfo.dishMatRate.map(function(t){return t.timeCoord})}],yAxis:[{type:"value",axisTick:{show:!1},axisLine:{show:!1},axisLabel:{formatter:"{value}%",margin:20,textStyle:{color:"#666666",fontSize:13,fontWeight:300}}}],series:[{name:"排菜率",type:"line",itemStyle:{normal:{color:"#8bc34a",lineStyle:{color:"#8bc34a"}}},data:this.matRateInfo.dishMatRate.map(function(t){return t.dishRate})},{name:"用料确认率",type:"line",itemStyle:{normal:{color:"#4aa8f3",lineStyle:{color:"#4aa8f3"}}},data:this.matRateInfo.dishMatRate.map(function(t){return t.matConRate})}]};t.setOption(e),this.$utils.addWindowResize(t)},drawtGoodsOptRate:function(){var t=this.$echarts.init(document.getElementById("goodsOptRate")),e=this.goodsOptRateInfo.goodsOptRate.map(function(t){return t.timeCoord}),a=this.goodsOptRateInfo.goodsOptRate.map(function(t){return t.schAcceptRate}),o={tooltip:{trigger:"axis",formatter:function(t){for(var e=t[0].name+"<br/>",a=0,o=t.length;a<o;a++)e+=t[a].marker+t[a].seriesName+"："+t[a].data+"%<br/>";return e}},grid:{left:"2%",right:"2%",bottom:"10%",containLabel:!0},legend:{data:["指派率","配送率","验收率"],orient:"vertical",itemGap:4,x:"right"},calculable:!0,xAxis:[{type:"category",boundaryGap:!1,axisTick:{show:!1},axisLine:{lineStyle:{color:"#cccccc"}},axisLabel:{margin:15,textStyle:{color:"#666666",fontSize:13,fontWeight:300}},data:e}],yAxis:[{type:"value",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{formatter:"{value}%",margin:20,textStyle:{color:"#666666",fontSize:13,fontWeight:300}}}],series:[{name:"指派率",type:"line",itemStyle:{normal:{color:"#00bcd4",lineStyle:{color:"#00bcd4"}}},data:this.goodsOptRateInfo.goodsOptRate.map(function(t){return t.schAssignRate})},{name:"配送率",type:"line",itemStyle:{normal:{color:"#4aa8f3",lineStyle:{color:"#4aa8f3"}}},data:this.goodsOptRateInfo.goodsOptRate.map(function(t){return t.schDispRate})},{name:"验收率",type:"line",itemStyle:{normal:{color:"#ef5350",lineStyle:{color:"#ef5350"}}},data:a}]};t.setOption(o),this.$utils.addWindowResize(t)},drawDishRsRate:function(){var t=this.$echarts.init(document.getElementById("dishRsRate")),e={tooltip:{trigger:"axis",formatter:function(t){for(var e=t[0].name+"<br/>",a=0,o=t.length;a<o;a++)e+=t[a].marker+t[a].seriesName+"："+t[a].data+"%<br/>";return e}},grid:{left:"2%",right:"2%",bottom:"10%",containLabel:!0},legend:{data:["菜品留样率"],orient:"vertical",itemGap:4,padding:[20,0,0,0],x:"right"},calculable:!0,xAxis:[{type:"category",boundaryGap:!1,axisTick:{show:!1},axisLine:{lineStyle:{color:"#cccccc"}},axisLabel:{margin:15,textStyle:{color:"#666666",fontSize:13,fontWeight:300}},data:this.dishRsRateInfo.dishRsRate.map(function(t){return t.timeCoord})}],yAxis:[{type:"value",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{formatter:"{value}%",margin:20,textStyle:{color:"#666666",fontSize:13,fontWeight:300}}}],series:[{name:"菜品留样率",type:"line",itemStyle:{normal:{color:"#4aa8f3",lineStyle:{color:"#4aa8f3"}}},data:this.dishRsRateInfo.dishRsRate.map(function(t){return t.schRsRate})}]};t.setOption(e),this.$utils.addWindowResize(t)},drawLicWarnProcRate:function(){var t=this.$echarts.init(document.getElementById("licWarnProcRate")),e={tooltip:{trigger:"axis",formatter:function(t){for(var e=t[0].name+"<br/>",a=0,o=t.length;a<o;a++)e+=t[a].marker+t[a].seriesName+"："+t[a].data+"%<br/>";return e}},grid:{left:"2%",right:"2%",bottom:"10%",containLabel:!0},legend:{data:["证照预警处理率"],orient:"vertical",itemGap:4,padding:[20,0,0,0],x:"right"},calculable:!0,xAxis:[{type:"category",boundaryGap:!1,axisTick:{show:!1},axisLine:{lineStyle:{color:"#cccccc"}},axisLabel:{margin:15,textStyle:{color:"#666666",fontSize:13,fontWeight:300}},data:this.licWarnProcRateInfo.licWarnProcRate.map(function(t){return t.timeCoord})}],yAxis:[{type:"value",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{formatter:"{value}%",margin:20,textStyle:{color:"#666666",fontSize:13,fontWeight:300}}}],series:[{name:"证照预警处理率",type:"line",itemStyle:{normal:{color:"#ef5350",lineStyle:{color:"#ef5350"}}},data:this.licWarnProcRateInfo.licWarnProcRate.map(function(t){return t.procRate})}]};t.setOption(e),this.$utils.addWindowResize(t)},drawSchNumber:function(t){var e=this,a=this.$echarts.init(document.getElementById("schNumberChart"));a.setOption({series:[{name:"业务指标",type:"gauge",avoidLabelOverlap:!1,min:0,max:5e3,splitNumber:5,radius:"92%",axisLine:{lineStyle:{width:10,color:[[.2,"#1ec4d9"],[.8,"#4aa8f3"],[1,"#ffa726"]]}},axisTick:{length:15,lineStyle:{color:"auto"}},splitLine:{length:20,lineStyle:{color:"auto"}},title:{fontWeight:"bolder",fontSize:14,padding:[288,0,0,0]},detail:{fontWeight:"bolder",fontSize:34,padding:[0,0,20,0]},data:[{value:t,name:"监管学校数量"}]}]});document.getElementById("schNumberChart").addEventListener("click",function(){e.$router.push({name:"school"})}),this.$utils.addWindowResize(a)},drawSchCategory:function(t){var e=[];t.forEach(function(t){e.push({name:t.schType,value:t.schNum})});var a=this.$echarts.init(document.getElementById("schCategoryChart"));a.setOption({title:{text:"学校分类",x:"center",y:"middle",left:"43.5%",top:"88%",textStyle:{fontWeight:"bolder",fontSize:14}},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c}所 ({d}%)"},color:["#55e0df","#75baf1","#d071e0","#f9ad3e"],calculable:!0,series:[{name:"学校分类",type:"pie",center:["52%","48%"],data:e}]}),this.$utils.addWindowResize(a)},gotoDetail:function(t){this.$router.push({name:"noticeDetail",params:{bulletinId:t}})}}),components:{Header:c.a,Breadcrumb:l.a}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"container"}},[a("Header"),t._v(" "),a("div",{staticClass:"main",class:{fullsize:1==t.isCollapse}},[a("Breadcrumb"),t._v(" "),a("div",{staticClass:"wrapperContent home"},[a("h3",[t._v("待办事项")]),t._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:t.homeInfo,expression:"homeInfo"}],attrs:{gutter:15}},[t.homeInfo.noDishSchInfo?a("el-col",{attrs:{xs:12,sm:12,md:12,lg:6,xl:6}},[a("div",{staticClass:"grid-content bg-purple announcs-content color1"},[a("p",{staticClass:"left-top"},[t._v("排菜")]),t._v(" "),a("h1",[a("router-link",{attrs:{to:{name:"platoonDetailList",params:{dishFlag:"0",mealFlag:"1",date:Array(2).fill(t.dateToday)}}}},[t._v("\n              "+t._s(t.homeInfo.noDishSchInfo.noExeNum))]),t._v(" "),a("span",{staticStyle:{"font-size":"20px"}},[t._v("所")]),a("i",{class:"iconfont icon-"+t.arrowObj[t.homeInfo.noDishSchInfo.status]+" large"})],1),t._v(" "),a("p",[t._v("今日未排菜")])])]):t._e(),t._v(" "),t.homeInfo.noAcceptSchInfo?a("el-col",{attrs:{xs:12,sm:12,md:12,lg:6,xl:6}},[a("div",{staticClass:"grid-content bg-purple announcs-content color2"},[a("p",{staticClass:"left-top"},[t._v("验收")]),t._v(" "),a("h1",[a("router-link",{attrs:{to:{name:"distributePlanDetailData",params:{acceptStatus:"0",date:Array(2).fill(t.dateToday)}}}},[t._v(t._s(t.homeInfo.noAcceptSchInfo.noExeNum))]),t._v(" "),a("span",{staticStyle:{"font-size":"20px"}},[t._v("所")]),a("i",{class:"iconfont icon-"+t.arrowObj[t.homeInfo.noAcceptSchInfo.status]+" large"})],1),t._v(" "),a("p",[t._v("今日未验收")])])]):t._e(),t._v(" "),t.homeInfo.dishNoRetSchInfo?a("el-col",{attrs:{xs:12,sm:12,md:12,lg:6,xl:6}},[a("div",{staticClass:"grid-content bg-purple announcs-content color3"},[a("p",{staticClass:"left-top"},[t._v("留样")]),t._v(" "),a("h1",[a("router-link",{attrs:{to:{name:"mealRetentionDetailData",params:{rsFlag:"0",date:Array(2).fill(t.dateToday)}}}},[t._v("\n                "+t._s(t.homeInfo.dishNoRetSchInfo.noExeNum)+"\n              ")]),t._v(" "),a("span",{staticStyle:{"font-size":"20px"}},[t._v("所")]),a("i",{class:"iconfont icon-"+t.arrowObj[t.homeInfo.dishNoRetSchInfo.status]+" large"})],1),t._v(" "),a("p",[t._v("今日未留样")])])]):t._e(),t._v(" "),t.homeInfo.warnNoProcInfo?a("el-col",{attrs:{xs:12,sm:12,md:12,lg:6,xl:6}},[a("div",{staticClass:"grid-content bg-purple announcs-content color4"},[a("p",{staticClass:"left-top"},[t._v("预警")]),t._v(" "),a("h1",[a("router-link",{attrs:{to:{name:"warningDetail",params:{licAuditStatus:"0",pageName:"全部",pageActived:"all",date:Array(2).fill(t.dateToday)}}}},[t._v(" "+t._s(t.homeInfo.warnNoProcInfo.noExeNum))]),t._v(" "),a("span",{staticStyle:{"font-size":"20px"}},[t._v("条")]),a("i",{class:"iconfont icon-"+t.arrowObj[t.homeInfo.warnNoProcInfo.status]+" large"})],1),t._v(" "),a("p",[t._v("今日未消除")])])]):t._e()],1),t._v(" "),a("el-row",{attrs:{gutter:15}},[a("el-col",{attrs:{xs:24,sm:24,md:24,lg:12,xl:12}},[a("div",{staticClass:"grid-content bg-purple-light content-block default"},[a("h3",{staticClass:"announcs-title"},[t._v("消息通知\n              "),a("router-link",{attrs:{to:{name:"notices"}}},[a("i",{staticClass:"iconfont icon-more",attrs:{title:"更多"}})])],1),t._v(" "),t.accounces&&t.accounces.length>0?a("ul",{staticClass:"announcs-list"},t._l(t.accounces,function(e){return a("li",{class:0==e.readFlag?"unread":"read",on:{click:function(a){t.gotoDetail(e.bulletinId)}}},[a("span",[t._v(t._s(e.title))]),a("span",{staticStyle:{float:"right"}},[t._v(t._s(e.pubDate))])])})):a("p",{staticStyle:{"text-align":"center","padding-top":"60px",color:"#bbb"}},[t._v("- 暂无数据 -")])])]),t._v(" "),a("el-col",{attrs:{xs:24,sm:24,md:24,lg:12,xl:12}},[a("div",{staticClass:"grid-content bg-purple content-block"},[a("h4",{staticStyle:{"padding-bottom":"12px"}},[a("span",[t._v("学校情况")])]),t._v(" "),a("el-col",{attrs:{xs:12,sm:12,md:12,lg:12,xl:12}},[a("div",{staticClass:"echart sm",attrs:{id:"schNumberChart"}})]),t._v(" "),a("el-col",{attrs:{xs:12,sm:12,md:12,lg:12,xl:12}},[a("div",{staticClass:"echart sm",attrs:{id:"schCategoryChart"}})])],1)])],1),t._v(" "),a("br"),t._v(" "),a("h3",[t._v("统计分析")]),t._v(" "),a("el-row",{attrs:{gutter:15}},[a("el-col",{attrs:{xs:24,sm:24,md:24,lg:12,xl:12}},[a("div",{staticClass:"grid-content bg-purple content-block"},[a("h4",[a("span",[t._v("排菜率和用料确认率趋势")]),t._v(" "),a("div",{staticClass:"date-container"},[a("span",[t._v(t._s(t.$timer.getDateAfterDays(this.dateMatSelected,-6))+"-"+t._s(t.dateMatSelected))]),t._v(" "),a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy/MM/dd","picker-options":t.pickerOptions},on:{blur:function(e){t.handleMatRate()}},model:{value:t.dateMatSelected,callback:function(e){t.dateMatSelected=e},expression:"dateMatSelected"}})],1)]),t._v(" "),a("el-row",{staticClass:"matRate-info-list",attrs:{gutter:15}},[a("el-col",{attrs:{xs:3,sm:4,md:5,lg:3,xl:5,offset:3}},[a("div",[a("span",[a("i",{staticClass:"iconfont icon-order-rate",staticStyle:{color:"#8bc34a"}}),a("span",[t._v(t._s(t.matRateInfo.curDishRate)+"%")])]),a("span",[t._v("今日排菜率")])])]),t._v(" "),a("el-col",{attrs:{xs:5,sm:5,md:5,lg:5,xl:5}},[a("div",[a("span",[a("i",{staticClass:"iconfont icon-matconfirm-rate",staticStyle:{color:"#4aa8f3"}}),a("span",[t._v(t._s(t.matRateInfo.curMatConRate)+"%")])]),a("span",[t._v("今日用料确认率")])])])],1),t._v(" "),a("div",{staticClass:"echart",attrs:{id:"matRateChart"}})],1)]),t._v(" "),a("el-col",{attrs:{xs:24,sm:24,md:24,lg:12,xl:12}},[a("div",{staticClass:"grid-content bg-purple-light content-block"},[a("h4",[t._v("配货单操作率趋势")]),t._v(" "),a("div",{staticClass:"date-container"},[a("span",[t._v(t._s(t.$timer.getDateAfterDays(this.dateGoodsSelected,-6))+"-"+t._s(t.dateGoodsSelected))]),t._v(" "),a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy/MM/dd","value-format":"yyyy/MM/dd","picker-options":t.pickerOptions},on:{blur:function(e){t.handleGoodsOptRate()}},model:{value:t.dateGoodsSelected,callback:function(e){t.dateGoodsSelected=e},expression:"dateGoodsSelected"}})],1),t._v(" "),a("el-row",{staticClass:"matRate-info-list",attrs:{gutter:15}},[a("el-col",{attrs:{xs:1,sm:1,md:2,lg:2,xl:3,offset:1}},[a("div",[a("span",[a("i",{staticClass:"iconfont icon-assign-rate",staticStyle:{color:"#00bcd4"}}),a("span",[t._v(t._s(t.goodsOptRateInfo.curSchAssignRate)+"%")])]),a("span",[t._v("今日学校指派率")])])]),t._v(" "),a("el-col",{attrs:{xs:1,sm:1,md:2,lg:2,xl:3}},[a("div",[a("span",[a("i",{staticClass:"iconfont icon-delivery-rate",staticStyle:{color:"#4aa8f3"}}),a("span",[t._v(t._s(t.goodsOptRateInfo.curSchDispRate)+"%")])]),a("span",[t._v("今日学校派送率")])])]),t._v(" "),a("el-col",{attrs:{xs:1,sm:1,md:2,lg:2,xl:5}},[a("div",[a("span",[a("i",{staticClass:"iconfont icon-accept-rate",staticStyle:{color:"#ef5350"}}),a("span",[t._v(t._s(t.goodsOptRateInfo.curSchAcceptRate)+"%")])]),a("span",[t._v("今日学校验收率")])])])],1),t._v(" "),a("div",{staticClass:"echart",attrs:{id:"goodsOptRate"}})],1)])],1),t._v(" "),a("el-row",{attrs:{gutter:15}},[a("el-col",{attrs:{xs:24,sm:24,md:24,lg:12,xl:12}},[a("div",{staticClass:"grid-content bg-purple content-block"},[a("h4",[a("span",[t._v("菜品留样率趋势")]),t._v(" "),a("div",{staticClass:"date-container"},[a("span",[t._v(t._s(t.$timer.getDateAfterDays(this.dateDishSelected,-6))+"-"+t._s(t.dateDishSelected))]),t._v(" "),a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy/MM/dd","picker-options":t.pickerOptions},on:{blur:function(e){t.handleDishRsRate()}},model:{value:t.dateDishSelected,callback:function(e){t.dateDishSelected=e},expression:"dateDishSelected"}})],1)]),t._v(" "),a("el-row",{attrs:{gutter:15}},[a("el-col",{staticClass:"matRate-info-list",staticStyle:{"text-align":"center","margin-top":"-10px"},attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[a("div",[a("span",[a("i",{staticClass:"iconfont icon-meal",staticStyle:{color:"#4aa8f3"}}),t._v(" "),a("span",[t._v("\n                      "+t._s(t.dishRsRateInfo.curSchRsRate)+"%")])]),t._v(" "),a("span",[t._v("今日留样率")])])])],1),t._v(" "),a("div",{staticClass:"echart",attrs:{id:"dishRsRate"}})],1)]),t._v(" "),a("el-col",{attrs:{xs:24,sm:24,md:24,lg:12,xl:12}},[a("div",{staticClass:"grid-content bg-purple-light content-block"},[a("h4",[t._v("证照预警处理率趋势")]),t._v(" "),a("div",{staticClass:"date-container"},[a("span",[t._v(t._s(t.$timer.getDateAfterDays(this.dateLicWarnSelected,-6))+"-"+t._s(t.dateLicWarnSelected))]),t._v(" "),a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy/MM/dd","value-format":"yyyy/MM/dd","picker-options":t.pickerOptions},on:{blur:function(e){t.handleLicWarnProcRate()}},model:{value:t.dateLicWarnSelected,callback:function(e){t.dateLicWarnSelected=e},expression:"dateLicWarnSelected"}})],1),t._v(" "),a("el-row",{attrs:{gutter:15}},[a("el-col",{staticClass:"matRate-info-list",staticStyle:{"text-align":"center","margin-top":"-10px"},attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[a("div",[a("span",[a("i",{staticClass:"iconfont icon-dealRate",staticStyle:{color:"#ef5350"}}),a("span",[t._v("\n                    "+t._s(t.licWarnProcRateInfo.curProcRate)+"%")])]),a("span",[t._v("今日处理率")])])])],1),t._v(" "),a("div",{staticClass:"echart",attrs:{id:"licWarnProcRate"}})],1)])],1)],1)],1)],1)},staticRenderFns:[]};var f=a("VU/8")(m,p,!1,function(t){a("avGx"),a("dnoF")},null,null);e.default=f.exports},avGx:function(t,e){},dnoF:function(t,e){}});